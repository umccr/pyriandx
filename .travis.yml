language: python
env:
  global:
  - secure: kXz7ObEsBi+fSbHevN3nX/zfYYNfiPT05rP2X6cfClceJor42REuewtG6QsggltKmvb1dBstJw2X7MJDQp4JGNmI5+ly1AqbnCOsNZJST01AKflj3SzMuRueBXSNmz4qOcQosqNLaUL83jMQLL6yZWoBBVe/Hq1hC30fWmeT1Rl7V2tGL1I4JNRuIEzGSZM0aax6wDIV4sLJPupgENSvnGWJ4024Qay9kqJXOcYM+BLymD+/eZn9O2nWfUzpA1wPhoRVgXICKfi+UdB/OWZC9J1WeCyLddIpxVjcKhtaA4RNvQAClbgfXof0OSPgxwXjszbTey0FyUgg3OW8eKp2sdYlKC1RAz3sp5fpdruf9Py7p2QT8PDuQX2D+VaJd/nDkX+E6uvTi658Ytsk+eaJgLmD6EFqQo1PMrB5jmg+cFl5qGiMhi5XgTmc0wP5Iv8plvKkut1cORvqtlwcHNubzRWbV0Co+qAdj01WLBVu1I9TXI2bv2x6BF9Y398GWXKBY43yP96UMs/pTxZrXXWQTYrxq8A0FhYZAEOiP9bI7yuaPbbNll8ugwDsd4cvv9575sHXRQHPDILq3eRwQXec+fw/6yg9ERS68wSHZj+G63rZtRavxsBK8GS7XHeuyjjfDHLbi/EVBSl7NlEp57eZpxvO4gGo7mqOxVzOBdqXYAA=
  - secure: hd+0I6gjLVmaJ7Iy2qK7Lv374oQlFAHCA9OfW2opmyrOJUMUiZUxbgXMLOXW67n08RjUgeBC85e1gTZ7fEvrHoNzHf+Z+lvVYgqlQsem0F58+LCkfF1AYtNqeKj04mOQ3keLWZLgwu+zVXKYLdy5vGWy/Nv4S51XezpVKGq1Guqw5yYjPskuK+TtiH5LWikQxAT+mbafa8HPvi7tvmPZB1tV2FZVKN2KnBitE+LXC2uwfYCQE9CQB0TSeUvETRIGQnddha/sbPQ2WUSpOTwpFbzzW8LhHDoH+0M4+uB4SMIvvHpUHpL5ALd+MAifw/8K1C6Onsox5ERUvx5aA+Zeo3jogN4c2FGs599XhqUMT6l0irECf0JdrJuku96wF0MjVagh+O/u/aWmaBAgVBjzZMz6xd1A/gOboKQ10admS5LxoDANBCUa/JFWqeZkF9hxQT1aV7BcL9Y60zh+uTjEN7KaSbFimienT8NAaMaEYO3fSlYUS5sQpUIsPDfyhp29iUD1qXwp383RjN7sMuq1VaSTwq4GFLbG7unODqiX6KZQdme/K3sUi7wa5iMHPAbMJttOUrmqbvN9HtSbYGpRCTgvCjt7VrSQNnXO5QXw88AQFJD1qdrFBfJLE0Q7JnhhD8zRz/9kZ48kuUC1DVFbBG6bHlflh5fJViwMCnebVy0=
  - secure: NeahVNHTliO5ArqbXMw9KGfEPSdfGjR1UOd3lxICtsfd7nD+rZiC7iTx0ikvR0258PD8LWkdLXg466ZxvjV5rouxtGJMUvd0GM6Qhq4qw49qQSxEUVBajN8Q92u4kMarbjTPRN/SH1Jia5Q6ye+jFG1RPdOm3asAT4m8KsxlpZEifhmbfA+hKuhKrUeILjkOhCtx1QLqS15Ot4aubJncyv2D3U9bN1Fe1mrTZPei/ifRm75+KIxOR6TofsEMd2rkdbK+FUxZjK6JHQlzmCU4FC9jAiWm9ac9ycS99gbmro7JKvSW3dVidbQ5Uj/WnsFfkn4COszwopi4wmMZx2hUJRjOnYhKzlf2P5axU15AD+3w0RJxqIFP3iJNkq/xEz9SYJFmOxcFaMneD8FeFUi4uYO0tCEWQdiMorvfCskNznkt/BGIHOLX9oWR1I/URkfNhoOFlpun8TFk1pSRdz55XLwPxn7xnfiUUmXYfpEAoVQxCJ79Q2WOz3yWGMoBa1rAQ6glP+3kF3Nd6koM8zinMn7gUF1bqFso/dv9pe/29SCE93eGAM6ugJCl/F+am3bByUjnzpmDDC0FqesngESoJIVAbv69x4WRmEVluFjdRpbLRj7ZOybWo0o4NM1kqdx1D1RWwfdaIhaGtGLRn5WHcceP7v0Uon/cEpayfZvQWKg=
python:
- '3.6'
install:
- pip install .
script:
- sudo apt-get update && sudo apt-get install -y wget jq
- wget https://github.com/umccr/pyriandx_test_data/raw/master/COLO829__COLO829T-somatic.pcgr_acmg2.vcf.gz
- cat pyriandx/json/create_case.json | jq ".specimens[0].accessionNumber = $RANDOM"
  > create_case.json
- pyriandx --username $USERNAME --password $PASSWORD --institution $INSTITUTION --json
  create_case.json COLO829__COLO829T-somatic.pcgr_acmg2.vcf.gz
deploy:
  provider: pypi
  user: umccr
  distributions: sdist bdist_wheel
  on:
    tags: true
    python: 3.7
  password:
    secure: Y6b935cYj3Cu1uf82a1cv8LzuLyx+A2mmZRtRY2yQIjtCUBZCmfI+oOxF9+65FxWto1RkkknCDzo2KtWwKF1LDd/y1iQOPA87+FC/20ylyInAzLYzzO8yYUySPXD7p2be0sU44Kx+nQBkiGQNDQHNVpbcQXwO0X9ukXfWWVdj/1pNA4Wj4NZgy1EHP63Ikf1+PM6vaS7o5fmEWv+4eT0Y3HF9iXSH8xMi2Yq/QUWG/rxI4F6+elmO6EP5feO7YCAD8lapIl/sgKy3/WFz0IKxDJhUz/FbzzmDWCCZeMLGMToUBTbL4LfceERmbbvh13RJk4CjrYuZtZA5u6CmHTrnTy2kgWKUoMr54u9oTkrb25O3DL8g+JMY7E0UN8/NJEs720+KhntZ5VJ6VsCvETBX11XnHAgCBqSCF1iwgltHXg3rfMTQ29pTVB8z2nt7DXKQ7tf5KdoYMAAC2ULOi49lQAmJlHv3noZU8VcP+cREVb8PYDz7Gnuj++YgF+W+v/6gmUEEXyNoqFJluMX7oTIm5/8YmeGrePCEObVFQ9wXeW3vfJuJMNRwry4ZxnL63z9PU6JuWNd/ytMbjDU14SMO6Hp+UAxd9Kf60RKnovD5oay9sQhK3i6yFQjQ4QOlkYQJQXWMghgFItUZ2vB4StHI6w646LLy1V62BTs3PT8v0M=
