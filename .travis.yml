language: python
python:
  - "3.6"
env:
  global:
  - secure: XDCo6Yl+b7FqBpiudFEn5+cmva2XLaamzXhdOfGIm7PJ5QK6hQB4J0b1Q/tq5VZoFW41F1nsEUZPHayZl3NQ98C+LUCJ5YYUgtXPzkYVkZzT35sTA4QEz8VBs3j0xwyAo3xDt1S0ILuz8jD0Dl8tcMeAKoyiHkIUkOp4NufQsz4lOj1Ciz1wb0KUEc0eplUvxwcvQZSgHmfsJUWibJMiIakBLbEfuS/ktnSv2dc92S+lrRLVrycIeF+5IgIkQ3SJs5xjaqG+QYNesQekCNxmsdgHMyaWvduzElfL1dqjJatKoTMx4MLMl1+i5ij4Iqf+esSJtBhSsxQK1GRzpjfZSfrnS5oqM/eeJy0Sql1U9Bj3K1WPSw0xbalUKxcgZzb4WCEO5bnnjSWuy0EkWnO6XWTi9tN1L9SO832cP70TMlwJAZHNTOgSPfmOE86L5ijo0FU0gcXfwP/SyZbFmF5nTNC6jFvWDj7Yz0mcJo70wPUJMInNGil/o+2ho2543ZFnszxAqG8lXoG5+Q/2CMPEGvJ/3V8MiTZ9tBa7MRbziPNxl3bGc2NqtN6pILgiv6I4z2jMbjgdgWAy5cBk7MmC6erQgVRrbW/KeUSVRLW4RxVba1uWJXTfrDfjbuakhf73Fg4wp0P6kiempBI+y7x5Yi3hNru927Mj2i4804eRXPE=
  - secure: FGLgTcSPL32o/+O+dQu8WWyEg68wPSeneqiD20lVoFsXZJy74o8/wki+lStrskcQmF70s7BRDGMamKDhg2HhDo4crwH3ln0DyhtsGvYd8shRvNV1hFsY8n255Ql35n+/TzUvN+vauNEIkgi7gEBrxoq4UsxxJoMZIUZe/IXKIYPJ3Vj6Dmy6+PbCJsc5A5BRNbeez7JHQUWiTfGEtsy2Q1uLKHbZLfR53bCwJS7lch6KoVLv31QVlvoS0RRg8F/5Po6RT7CY620Pz0Ese+ClUzQ/gTiAUvGZOx7KIFp6q7wq1+9jmWQtDj/67zeszYd8meXIEkDFUhQmPZKZyKL6KE1PeJEG+mO4xoSs6EpiYY3AgJI5zxJMrEYz2nnY6Fd/U3XGi4gz3yzSZshwxarA8kZp7o3aZHHK4w40e8rG14YM+SvQQJSJK/gyG1+oDi3n/MyrjgQ0j/Smc2rZLc7eP67ze9oH9NguBf8RUzmQjAt+g5PcI5mVfjU/17hSE5hyzUjWg9/ky//gEpseUq6Ja2PT6w9w17ULNLLqOeDs9j/kZ6H3smX6F4kQPuetTPxStZL/KU5r7CB0QvmfXhUBW9UY12upCYG0cpYVsAYYnuqguJ5lZ85xm07HpQ6Y+OJlWuUuBuYPudAfvyqh/uPezBJh1Gg54T0Acgcoffi6gxs=
  - secure: vTL9vk0WN9dfdB+QNQ1/PN6ApXxaYPWXKPZ5U0j6+SFa0IZan0mKj2UbkYE5aUSughiPDonDCLey/GKTgc7bRQ2gu/4/HtoUHV4tCKTQ+9QE+0K9B9idFtfdNKgDMA4htCxS9JYkshRE91XXNlI3KEDHjwg+z0oT0Pvux3WiM9uoO3Kq/QioOyK7akbPaZJD89b4gpfrSspCId8J9216tBmfQVSWyqotC56cAE2PWKao6zcvzOHjYhJavAtmBgJ7l1LnZt6HXThESpLowvCetjxRRVlxPPQpJjX1rz1xmtcWwjWH1J/8uKKK6xeg219v7kNyou52rQircQyDjobhTjvyAQiV/0AEpcmEvw/Ic/opfZ6ujUXXzgyCrcqKh6cNuWsYZlHS6STV8RMyOOioN2fHj59K+oN08N0hV+86hGgVtr5DNDM2yxPP6StkFvoPaSI7Fco098fm7vtjcV8w9OQLRKfMktoNbItH+TTrFWi8ZFRcdorMDrURmZIcUsdysV4vXBXZ7PfciaowFQ3EEvlxW45n+V+fEbIQSfY8Qejmo4CZSMzcx4I3hYeYJJj5tnHhQAKbzun6RmyO+XAoUDGbQ9EnSMsbp6RF6VkcCvw98l2+rgKvemxuvVCzV4E2oycr46n8zhmPqMCpU56QdPBEs0nMDFPGQyrlss4fryI=
install:
  - pip install .
script:
  - sudo apt-get update && apt-get install -y wget jq
  - wget https://github.com/umccr/pyriandx_test_data/raw/master/COLO829__COLO829T-somatic.pcgr_acmg2.vcf.gz
  - gunzip COLO829__COLO829T-somatic.pcgr_acmg2.vcf.gz
  - cat pyriandx/json/create_case.json | jq ".specimens[0].accessionNumber = $RANDOM" > create_case.json
  - pyriandx --username $USERNAME --password $PASSWORD --institution $INSTITUTION --json create_case.json COLO829__COLO829T-somatic.pcgr_acmg2.vcf