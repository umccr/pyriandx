language: python
python:
- '3.6'
env:
  global:
  - secure: njwvhdrCGnMBnHEBAoaBypEIql792hLOthN1bl5wAQZyYuc2/4rdnXRwvyCS3RuWkWWoyNrSt86YenyedxAz7BrxgIimbr91sN+SewpMQeOIvhx+I099NrXJTZd827EqEBz1nr5cYIB9t4d1XuahC14Xa8UmoAeUy9rvZrLGsuAxgH7ON3ZhNnhVJeH+8VXZ7xEWGkzKU2hBlcL4I+2nqtWYiUFiFaGNVus3yX/7Bsxevmxv2ay2AYXCvsER9b+9gNqwwzAUcxfvgClVaJkTvlFPCKjEf2Nd8FqtuYQiud2Pw9cM3tn+5h+/z2xfXJkSV/LN6ztR5IoOOGA1RM+RWOvAOactwP/nbcaNijUtyBomgslFMLpZfuDub8V9Zlvlv+LAwF+i956n0+SS2fglETf7aHip5CUYdehOB9FHNAZBOZ//EGAI7JeDZAh8t02WMY2NGKM06iomED+KFfb11gU3tQctWx8r+mpzB5mdSDW7jTTqlKllcxxEhoLV+Ns1XlFKz5aJIJiCSYp4hXZs8lFIwJRVUWatkS46gIRNPOmsNOix5nQ4IhJDXkjgbNc1mfdrJwYWIoFk7gFdCrF/8IkTicOetgbr4ylJZ+ZGMPTGOIJEXdofyYcqgtOcErt83zH7l+6dCGGebp8JGKsW/cZdl+mz06a0QRIlh9qxm58=
  - secure: dpMT02ZlQbk5yOh+gCGEdx9OJAmE0KK+MmWau9AR3sykaVirMVEJ9xvi/J/ikD5dqwLsi84WRujt2GAoTDmOf0M5DhQof6Yob42iulcP4ZpJyRjSXMMJHlHvvpCxkOE0rMeVMjfCRTHsabDTlGQHoV5ITVnNiuB609UmQz3exw0Llb6t67FSNSetN8x2s7dmnI7s+U27tNren+4LTFkcfLSnLGAvPkTUZu9qWLzZ26Ic8qMvcsFjAcHSmaobZvd3svjWH+BeeuDhK4HwIKOl3/7SyN5BOFmqzfpYE+z6QAFbvpT2YJqppPAfgHbMAv6UDfvm/53QvZWBdCnPGrnmwOTzcC17LDLIuF/2UtaNMvDhRicEP3hA5IXqkNZ/IIvX3MHYR8CfZP/f+/KHlSSCJ24Me+WAybjYMu0mUI4QKJstQeetEoz9sHT/7NZJaL1Lh7ZkwJiBhfZkQfXQ1kosHcaVXH3QoqujRjTL/jxPbw0q8t6ksrfCiaiKN0omByj1pDVVtObOa251u7wVwxn82knLwoJMZrePKOpuyROodSmsXjf6bX0sVHS0380gLHRyiYkUOiTbYNrdgjn0gBd7td0ktwgsW+48NX7hR1nka4Okt4YLR2ARbKSGoDKTwpYZjXPfpToqrP0j2VM7iBlSo8R1wcMGYWqmGAnoletLW6o=
  - secure: OaOKDizhGlau/6kgjhw3FkKPyZSNnzDH3hdRZZuZxXTs3UoE/n/Sti+qvqVngkvbVZoGgrPI1vls7OEVW8cc7I4iCmMaK5D+fCFd0AczepFoRpCyEQvGScyTR2b0suNzHZdgwMYC8A865tlk7o9z5pj4kHPOP5oX2IoUvJo2iWkcZOr+8zCWDbMAkUhW7p2NNQLGboQH1IYi34M2ojzXGrOUCWS3ZphRGnMKSOAgk0JWmPvFLuAHwsejjED/MBwpYYVlA9FOn9YlMnAFUUICrmooNnT7ORTGRGP34y62ZYAYDNn7rbo71+n+wSLhWzzgbU0NhrFOvqMpqZKelq3807WERUHRK9lBQsuqu+T8gRdoulSdmsrC+expUlEu/5sYVVWMBVXWU0R6nWhvjzD8yOgTS4S5WdMtglAO52r78TdloQRSA8KsW0lVCsQarRDviV++LEz/dx/Rj0iuDjStDkdto6sEY83anL500q7NW06TkhRU+fadIMogHRjJeLBZlnv96Aas3Ol1j7JAku7YFjUpGkI5eGiREH5nj4BERA7SViJBu74+VGNvkE1VQkLI0kngBm751XcOKl6vzFxJD/XyRUubg3klRpRIl+Kno+/QsQziqRwmZfzwK80R/LMtbwAve5Giy/nyO891J9qIzIhvrE2Waa69vm7pahZ/Dig=
install:
- pip install .
script:
- sudo apt-get update && sudo apt-get install -y wget jq
- wget https://github.com/umccr/pyriandx_test_data/raw/master/COLO829__COLO829T-somatic.pcgr_acmg2.vcf.gz
- gunzip COLO829__COLO829T-somatic.pcgr_acmg2.vcf.gz
- cat pyriandx/json/create_case.json | jq ".specimens[0].accessionNumber = $RANDOM"
  > create_case.json
- pyriandx --username $USERNAME --password $PASSWORD --institution $INSTITUTION --json
  create_case.json COLO829__COLO829T-somatic.pcgr_acmg2.vcf
